@model MiniFB.Models.LoginModel

<link href="~/Content/Home.css" rel="stylesheet" />

    <div class="row-fluid">
        <div class="span6 thumbnails">
            @*login form*@
            <div class="thumbnail loginform-thumbnail">
                
                <div class="form-btns">
                            <button class="btn loginLink">@Html.ActionLink("Logga in", "Index", "Home")</button>
                            <button class="btn regLink">@Html.ActionLink("Registera dig", "Index", "Home")</button>
                 </div>
                <div id="membership-panel"></div>
                @*login form slut*@
            </div>
        </div>
        <div class="span6">
            <a href="#" class="thumbnail">
                <img src="http://placehold.it/450x250" alt="">
            </a>
        </div>
    </div>

    <div class="row-fluid">
            <div class="span6 thumbnails">
                <a href="#" class="thumbnail">
                    <img src="http://placehold.it/450x250" alt="">
                </a>
            </div>
            <div class="span6">
                <a href="#" class="thumbnail">
                    <img src="http://placehold.it/450x250" alt="">
                </a>
            </div>
    </div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")


<script type="text/javascript">

    $(function () {
        bindMembershipLinks();
        loadMembershipView("/Account/_Login");
            
    });

    function bindMembershipLinks() {
        $(".loginLink").click(function () {
            loadMembershipView("/Account/_Login");
            return false;
        });

        $(".regLink").click(function () {
            loadMembershipView("/Account/_Register");
            return false;
        });
    }

    function loadMembershipView(url) {
        $.get(url, function (data) {
            $("#membership-panel").html(data);
            prepareLoadedForm();
            bindMembershipLinks();
        });
    }

    function prepareLoadedForm() {
        var $form = $("#membership-panel").find("form");
        if ($form.exist()) {
            $form.unbind();
            $form.data("validator", null);
            $.validator.unobtrusive.parse(document);
            //bindFormEvent($form);
        }
    }
    //function bindFormEvent($form) {
    //    $form.submit(function (e) {
    //        e.preventDefault();

    //        if ($(this).valid()) {
    //            var formObject = $(this).serializeObject();
    //            var url = $(this).attr('action');
    //            $.post(url, $(this).serializeObject(),
    //                function (data) {
    //                    if (data.Success == true) {
    //                        alert('Success');
    //                    } else {
    //                        alert('Error');
    //                    }
    //                });
    //        }
    //    });
    //}

</script>
    }